<!DOCTYPE html>
<html>

<head>
	<!-- Meta -->
	<meta charset="UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
	<meta name="generator" content="Jekyll">

	<title>Базовая («классическая») алгебра отношений (реляционная алгебра).</title>

	<!-- CSS & fonts -->
	<link rel="stylesheet" href="/db/css/main.css">
	<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,900,400italic%7CSignika:700,300,400,600' rel='stylesheet' type='text/css'>

	<!-- RSS -->
	<link href="/atom.xml" type="application/atom+xml" rel="alternate" title="ATOM Feed" />

</head>


<body>
	<div id="wrap">
	  	
	  	<!-- Navigation -->
	  	<nav id="nav">
	<div id="nav-list">
		<a href="/db">Главная</a>

		<!-- Nav pages -->
	  
	    
	  
	    
	  
	    
	  
	    
	  

    <!-- Nav links -->
	  <a href="https://github.com/korolr">Загрузка</a>
<a href="https://github.com/korolr">Проект на  Github</a>


	</div>

  <!-- Nav footer -->
	
	  <footer>

	<span>Версия 1.1.0</span>

</footer>

	

</nav>

    
    <!-- Icon menu -->
	  <a id="nav-menu">
	  	<div id="menu"></div>
	  </a>

      <!-- Header -->
      
        <header id="header">
	<a href="/db">
		<img src="/db/img/emerald.svg" alt="Emerald Logo">
	  <h1>Основы проектирования бд</h1>
	</a>
</header>

      

    <!-- Main content -->
	  <div id="container">
		  
		<main>

			<article id="post-page">
	<h2>Базовая («классическая») алгебра отношений (реляционная алгебра).</h2>		
	<time datetime="2015-02-15T00:00:00+04:00" class="by-line">15 Feb 2015</time>
	<div class="content">

		<p>Базовая («классическая») алгебра отношений (реляционная алгебра).</p>

<p>Небольшой набор операторов, которые позволяют манипулировать соотношениями и имеют достаточно богатые возможности.</p>

<p>Операторы:</p>

<ol>
  <li>Объединение, пересечение и разность: Обычный набор операторов над множествами.</li>
</ol>

<ul>
  <li>.Схемы отношений должен быть одинаковыми.</li>
</ul>

<ol>
  <li>Выборка: Выбор некоторых строк из отношения.</li>
  <li>Проекция: Выбор некоторых столбцов.</li>
  <li>Произведение и соединение: Композиция отношений.</li>
  <li>Переименование отношений и их атрибутов.</li>
</ol>

<p>Выборка.</p>

<p>R1 = C(R2),</p>

<p>где C – это условие включающее атрибуты R2.</p>

<p>Пример:</p>

<p>Отношение Sells</p>

<p>bar  beer  price</p>

<p>Joe's      Bud          2.50</p>

<p>Joe's      Miller     2.75</p>

<p>Sue's      Bud      2.50</p>

<p>Sue's     Coors     3.00</p>

<p>Имеется в продаже у Joe  JoeMenu = bar=Joe's(Sells):</p>

<p>bar                beer                price</p>

<p>Joe's             Bud         2.50</p>

<p>Joe's      Miller      2.75</p>

<p><strong>Проекция</strong><strong>.</strong></p>

<p>R1 = L(R2), где L – это список атрибутов отношения R2.</p>

<p>Пример:         bar,price(Sells):</p>

<p>bar  price</p>

<p>Bud         2.50</p>

<p>Miller      2.75</p>

<p>Bud         2.50</p>

<p>Coors      3.00</p>

<ul>
  <li>.Замечание: в результат включаются и одинаковые кортежи (строки).</li>
</ul>

<h1 id="произведение">Произведение.</h1>

<h2 id="r--r1-х--r2-каждый-кортеж-t1-отношения-r1-соединяется-с-каждым-кортежем-t2-отношения-r2-и-кортеж-t1-t2-добавляется-в-отношение-r">R = R1 х  R2. Каждый кортеж t1 отношения R1 соединяется с каждым кортежем t2 отношения R2 и кортеж t1 t2 добавляется в отношение R.</h2>

<p><strong></strong>** -соединение.**</p>

<p>R = R1 C  R2. Эта операция эквивалентна R = C (R1х R2).</p>

<p>Пример:</p>

<p>Sells =</p>

<p>bar  beer  price</p>

<p>Joe's      Bud          2.50</p>

<p>Joe's      Miller       2.75</p>

<p>Sue's      Bud          2.50</p>

<p>Sue's      Coors       3.00</p>

<p>Bars =</p>

<p>name      addr</p>

<p>Joe's           Maple St.</p>

<p>Sue's           River Rd.</p>

<p>BarInfo = Sells Sells.bar=Bars.nameBars:</p>

<p>bar  beer  price  name  addr</p>

<p>Joe's     Bud          2.50       Joe's  Maple St.</p>

<p>Joe's     Miller        2.75       Joe's  Maple St.</p>

<p>Sue's      Bud          2.50       Sue's  River Rd.</p>

<p>Sue's      Coors       3.00       Sue's  River Rd.</p>

<h1 id="естественное-соединение">Естественное соединение.</h1>

<p>R =  R1      R2</p>

<p>Выполняется -соединение отношений R1 и R2 с условием равенства атрибутов с одинаковыми именами. В результат будет включен один столбец для каждой пары одинаковых атрибутов.</p>

<p>Пример: Предположим, что имя атрибута name отношения Bars изменили на bar, т.е. теперь имена атрибутов, определяющих название бара в отношениях Bars и Sells совпадают.</p>

<p>BarInfo = Sells       Bars:</p>

<p>bar  beer  price  addr</p>

<p>Joe's     Bud          2.50       Maple St.</p>

<p>Joe's            Miller               2.75              Maple St.</p>

<p>Sue's      Bud          2.50       River Rd.</p>

<p>Sue's      Coors       3.00       River Rd.</p>

<p>Переименование.</p>

<p>S(A1, . . . , An ) (R) создаст отношение идентичное отношению R, но с именем S и с атрибутами, порядок и имена которых определены A1,…, An.</p>

<p>Пример: Отношение Bars</p>

<p>name  addr</p>

<p>Joe's          Maple St.</p>

<p>Sue's         River Rd.</p>

<p>R(bar,addr) (Bars) =</p>

<p>name  addr</p>

<p>Joe's          Maple St.</p>

<p>Sue's         River Rd.</p>

<ul>
  <li>.Имя последнего отношения R.</li>
</ul>

<p>Комбинирование операций.</p>

<p>Алгебра =</p>

<ol>
  <li>Аргументы +</li>
  <li>Способы построения выражений.</li>
</ol>

<p>Алгебра отношений (реляционная алгебра):</p>

<ol>
  <li>Аргументы = переменные, обозначающие отношения + кнечные (константные) отношения.</li>
  <li>Выражения, построенные с использованием каких-либо операторов и круглых скобок.</li>
</ol>

<ul>
  <li>.Запрос = выражение алгебры отношений (реляционной алгебры).</li>
</ul>

<p>Приоритеты операторов.</p>

<p>Обычный способ группировки операторов:</p>

<p>1.
1.Унарные операторы ,  и  имеют самый высокий приоритет.</p>

<ol>
  <li>Затем следуют "мультипликативные" операторы      , С   и <strong>х</strong>.</li>
  <li>Самый низкий  приоритет имеют «аддитивные» операторы , и -.</li>
</ol>

<ul>
  <li>.Нет никакого универсального соглашения, так что мы всегда будем помесщать в круглые скобки параметр унарного оператора; также рекомендуется заключать в скобки все бинарные операторы и их параметры.</li>
</ul>

<p>Пример:</p>

<p>R  S     T</p>

<p>Операторы будут сгруппированы:</p>

<p>R  ( (S)      T).</p>

<p>Каждое выражение требует схемы отношения.</p>

<ul>
  <li>.Если в выражении присутствуют операторы , и -, то структура всех отношений должна быть одинаковой, поэтому используется любая из структур.</li>
  <li>.Проекция: используется список атрибутов этой операции.</li>
  <li>.Выборка: структура не изменяется.</li>
  <li>
    <p>.Произведение R х S: используются  атрибуты R и S.</p>
  </li>
  <li>
    <p>.Но если атрибут A есть и в R и в S и он участвует в операции, то перед именем атрибута ставится имя отношения с точкой, например  R.A, S.A.</p>
  </li>
  <li>.-соединение: так же как и произведение.</li>
  <li>.Естественное соединение: используются атрибуты каждого отношения, общие атрибуты присутствуют только один раз.</li>
  <li>.Переименование: используется все, о чем сказано в операции.</li>
</ul>

<p>Пример 1. Найти бар, который расположен на Maple Str. или в котором имеется в продаже пиво Bud по цене меньше $3.</p>

<p>Sells (bar, beer, price)</p>

<p>Bars (name, addr)</p>

<div class="highlighter-rouge"><pre class="highlight"><code>                       ****
</code></pre>
</div>

<p>**                                                                     <strong>** </strong>R(name)</p>

<p>**                               <strong>**  **name                                 ** </strong>bar</p>

<div class="highlighter-rouge"><pre class="highlight"><code>                        **** addr=Maple Str.                           **** beer=bud AND price&amp;lt;3
</code></pre>
</div>

<h3 id="bars-------------------------------sells">Bars                               Sells</h3>

<p><strong>Пример 2.</strong> Найти бары, где есть разные сорта пива по одинаковой цене. Sells (bar, beer, price)</p>

<div class="highlighter-rouge"><pre class="highlight"><code>                                                      **** bar



                                                **** beer &amp;lt;&amp;gt; beer1







                                  **** S(bar, beer1, price)



                                            Sells                      Sells
</code></pre>
</div>

<p>Запись выражений «в строку».</p>

<ul>
  <li>.Выбрать новые имена для промежуточных отношений и присвоить им значения, являющиеся алгебраическими выражениями.</li>
  <li>.Переименование атрибутов в схеме нового отношения может быть неявным.</li>
</ul>

<p>Пример:</p>

<h1 id="найти-бар-который-расположен-на-maple-str-или-в-котором-имеется-в-продаже-пиво-bud-по-цене-меньше-3">Найти бар, который расположен на Maple Str. или в котором имеется в продаже пиво Bud по цене меньше $3.</h1>

<p>Sells (bar, beer, price)</p>

<p>Bars (name, addr)</p>

<p>R1(name) := name(addr=Maple Str. (Bars))</p>

<p>R2(name) := bar(beer=Bud AND price&lt;$3 (Sells))</p>

<p>Ответ(name) := R1 <strong></strong> R2</p>

<p>Семантика для наборов.</p>

<p>Отношение (в SQL, по крайней мере) - действительно набор или множество с повторениями.</p>

<ul>
  <li>
    <p>.Может содержать одинаковые (равные) кортежи более одного раза, хотя нет никакого определенного порядка (в отличие от списка).</p>
  </li>
  <li>.Например: {1; 2; 1; 3} – набор, а не множество.</li>
  <li>
    <p>.Выболрка, проекция и соединения для наборов выполняются также как для множеств.</p>
  </li>
  <li>.Работают на основе кортеж-с-кортежем и не устраняют дублированные кортежи.</li>
</ul>

<p>Объединение наборов.</p>

<p>Суммируется количество вхождений элемента  в обоих наборах.</p>

<p>Пример: {1; 2; 1}    {1; 2; 3} = {1; 1; 1; 2; 2; 3}.</p>

<p>Пересечение наборов.</p>

<p>Выбирается минимум количества вхождений в каждый набор.</p>

<p>Пример: {1; 2; 1}  {1; 2; 3; 3} = {1; 2}.</p>

<p>Разность наборов.</p>

<p>Результат - разность количества вхождений в набор.</p>

<p>Пример: {1; 2; 1} – {1; 2; 3; 3 } = {1}.</p>

<p>Законы для множеств и наборов отличаются.</p>

<ul>
  <li>
    <p>.Некоторые знакомые законы поддерживаются для наборов.</p>
  </li>
  <li>
    <p>.Например: операторы объединения и пересечения - коммутативны и ассоциативны.</p>
  </li>
  <li>
    <p>.Но другие законы, которые поддерживаются для множеств, не поддерживаются для наборов.</p>
  </li>
</ul>

<p>Пример:</p>

<p>R  (S  T)  (R  S)  (R  T) поддерживается для множеств.</p>

<ul>
  <li>.Пусть R, S, и T – наборы из одного элемента  {1}.</li>
  <li>.Левая сторона: S T = {1; 1}; R (S T) = {1}.</li>
  <li>.Правая сторона: R S = R T = {1};</li>
</ul>

<p>( R  S)  (R  T) = {1}  {1} = {1; 1}  {1}.</p>

<p>Расширенная ("неклассическая") реляционная алгебра.</p>

<p>Добавляется несколько операторов, необходимых для SQL, операций над наборами.</p>

<ol>
  <li>
    <p>Оператор устранения дублирования .</p>
  </li>
  <li>
    <p>Расширенная проекция.</p>
  </li>
  <li>
    <p>Оператор сортировки .</p>
  </li>
  <li>
    <p>Оператор группировки-агрегирования  .</p>
  </li>
  <li>
    <p>Оператор внешнего соединения      .</p>
  </li>
</ol>

<h1 id="устранение-дублирования">Устранение дублирования.</h1>

<p>(R) = отношению, где присутствует только один кортеж из нескольких одинаковых, имеющихся в отношении R.</p>

<p>Например:</p>

<p>R =                  A   B                   (R) =         A   B</p>

<p>1   2        1   2</p>

<p>3   4       3   4</p>

<p>1   2</p>

<h1 id="сортировка">Сортировка.</h1>

<p>L(R) = список кортежей R, отсортированных по значениям атрибутов из списка L.</p>

<ul>
  <li>
    <p>.Замечание: тип результата отличается от обычного типа (набор или множество) реляционной алгебры.</p>
  </li>
  <li>
    <p>.Следствие: другие реляционные операторы не могут следовать .</p>
  </li>
</ul>

<p>Например:</p>

<p>R =   A   B</p>

<p>1   3</p>

<p>3   4</p>

<ol>
  <li>52</li>
</ol>

<p>B(R) = [(5; 2), (1; 3), (3; 4)].</p>

<p>Расширенная проекция.</p>

<p>В качестве столбца в проекции допускается функция, имеющая в качестве аргумента один или несколько столбцов отношения R.</p>

<p>Например:</p>

<p>R =   A   B                A+B,A,A(R) =        A + B  A1  A2</p>

<p>1   2     3           1     1</p>

<p>3   4     7           3     3</p>

<p>Операторы агрегирования.</p>

<ul>
  <li>.Это не реляционные операторы; как правило, эти операторы позволяют определить каким-либо способом итоговое значение столбца.</li>
  <li>.Пять стандартных операторов: SUM, AVERAGE, COUNT, MIN и MAX.</li>
</ul>

<p>Оператор группировки.</p>

<p>L (R), где L - список элементов, каждый из которых</p>

<p>a) Единичный ( группирующий) атрибут или</p>

<p>b) Форма (A), где  - оператор агрегирования, а А - атрибут, к которому этот оператор применяется.</p>

<p>Оператор выполняется путем:</p>

<ol>
  <li>Группировки R согласно всем атрибутам (одинаковым множествам значений) из списка L.</li>
  <li>Внутри каждой группы, вычисляет (A), для каждого элемента (A) из списка L.</li>
  <li>Результат - отношение, чьи столбцы состоят из одного кортежа для каждой группы. Компоненты этих кортежей - значения, связанные с каждым элементом L для группы.</li>
</ol>

<p>**Пример.  ** Пусть R =</p>

<p>Bar  beer  price</p>

<p>Joe's     Bud            2.00</p>

<p>Joe's     Miller         2.75</p>

<p>Sue's     Bud            2.50</p>

<p>Sue's            Coors         3.00</p>

<p>Mel's      Miller         3.25</p>

<p>Выполнить beer, AVG(price) (R).</p>

<ol>
  <li>Определяются группы, согласно атрибутам группировки, в нашем примере, это сорт пива:</li>
</ol>

<p>Bar  beer  price</p>

<p>Joe's     Bud           2.00</p>

<p>Sue's     Bud           2.50</p>

<hr />

<h1 id="joes-------------miller--------275">Joe's             Miller        2.75</h1>

<p>Mel's      Miller        3.25</p>

<hr />

<p>Sue's     Coors         3.00</p>

<p>­- - - - - - - - - - - - - - - - - - - -</p>

<ol>
  <li>Вычисляется средняя цена внутри группы:</li>
</ol>

<p>beer                    AVG(price)</p>

<p>Bud               2.25</p>

<p>Miller            3.00</p>

<p>Coors            3.00</p>

<p>Внешнее соединение.</p>

<p>Естественное соединение может привести к потере информации, т.к. кортеж, который не может быть соединен с каким-либо другим кортежем, «повисает», т.е. не включается в результат.</p>

<ul>
  <li>
    <h2 id="пустое-значение-null--может-быть-использовано-для-отметки-висящих-кортежей-в-результате">.Пустое значение (NULL ) может быть использовано для отметки «висящих» кортежей в результате.</h2>
    <p>.Оператор внешнего соединения      также используется для этой цели.</p>
  </li>
  <li>.Варианты оператора внешнего соединения: - внешнее соединение, левое внешнее соединение, правое внешнее соединение (левое внешнее соединение позволит включить все «висящие» кортежи из левого отношения, правое внешнее соединение – из правого).</li>
</ul>

<p><strong>Пример</strong><strong>.</strong></p>

<p>R =   A   B  S = B   C  R       S =  A    B   C</p>

<p>1   2                        4   5                                3    4    5</p>

<p>3   4                        6   7                                1    2    </p>

<div class="highlighter-rouge"><pre class="highlight"><code>                                       6    7
</code></pre>
</div>

		
	</div>
</article>



	  </main>
		
		  <!-- Pagination links -->
      

	  </div>
	    
	    <!-- Footer -->
	    <footer><span>@2017 - Пктим</span></footer>


	    <!-- Script -->
      <script src="/db/js/main.js"></script>	


	</div>
</body>
</html>
